(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/coupon/giveAway"],{"0316":function(t,n,e){"use strict";(function(t){var i=e("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("2eee")),u=i(e("c973")),a=e("6d37"),r={components:{plateInput:function(){e.e("components/uni-plate-input/uni-plate-input").then(function(){return resolve(e("f049"))}.bind(null,e)).catch(e.oe)}},data:function(){return{id:"",type:"",show:!1,plateShow:!1,plateNo:"",typeIndex:1,phone:"",amount:"",navList:[{name:"金额券"},{name:"时间送券"},{name:"次数送券"}],current:0,num:"",time:"",amountList:[],couponActivityTypeId:""}},computed:{buttomStatus:function(){return 0==this.current?!(!this.amount||!this.plateNo)||!(!this.amount||!this.phone):1==this.current?!(!this.time||!this.plateNo)||!(!this.time||!this.phone):2==this.current?!(!this.num||!this.plateNo)||!(!this.num||!this.phone):void 0},codeStatus:function(){return 0==this.current?!!this.amount:1==this.current?!!this.time:2==this.current?!!this.num:void 0},amountList2:function(){return this.amountList.map((function(t){return t.denomination+"元"}))}},onLoad:function(t){this.id=t.id},methods:{changeCurrent:function(t){this.current=t},amountChange:function(t){this.amount=this.amountList[t.detail.value].denomination,this.couponActivityTypeId=this.amountList[t.detail.value].id},getAmountList:function(){var n=this;return(0,u.default)(o.default.mark((function e(){var i,u,a;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.$u.api.getCouponActivityCouponTypeListByQuery({couponActivityId:t.getStorageSync("parkingTicketActivityId"),couponType:2});case 2:i=e.sent,u=i.data,a=i.code,10002===a&&(n.amountList=u);case 6:case"end":return e.stop()}}),e)})))()},change:function(t){this.current=t},pay:function(){var t=this;return(0,u.default)(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.buttomStatus){n.next=2;break}return n.abrupt("return");case 2:t.staffOrShopkeeperGiveCouponToCar();case 3:case"end":return n.stop()}}),n)})))()},staffOrShopkeeperGiveCouponToCar:function(){var n=arguments,e=this;return(0,u.default)(o.default.mark((function i(){var u,r,c;return o.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:"",u="",r="",0==e.current&&(u=2,r=e.amount),1==e.current&&(u=3,r=e.time),2==e.current&&(u=1,r=e.num),i.next=8,(0,a.issueCoupons)({couponActivityId:e.id,couponType:u,scenes:1,toUserPhone:e.phone?e.phone:"",targetObject:e.plateNo,denomination:r});case 8:if(c=i.sent,console.log(c),10002==c.code){i.next=15;break}return t.showToast({title:c.message,icon:"none"}),i.abrupt("return");case 15:t.showModal({title:"提示",content:"停车券已发出",showCancel:!1,confirmText:"我知道了",success:function(n){t.navigateBack()}});case 16:case"end":return i.stop()}}),i)})))()},intoCode:function(){if(this.codeStatus){var n="",e="";0==this.current&&(n=2,e=this.amount),1==this.current&&(n=3,e=this.time),2==this.current&&(n=1,e=this.num);var i={scenes:1,couponType:n,denomination:e,targetObject:this.plateNo,toUserPhone:this.phone,couponActivityId:this.id};t.navigateTo({url:"qrCode?params="+JSON.stringify(i)})}},setPlate:function(t){t.length>=7&&(this.plateNo=t),this.plateShow=!1},handleConfirm:function(t){console.log(t),this.typeIndex=Number(t.detail.value)+1}}};n.default=r}).call(this,e("543d")["default"])},"08e4":function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){}));var i=function(){var t=this,n=t.$createElement;t._self._c;t._isMounted||(t.e0=function(n){t.plateShow=!0},t.e1=function(n){t.plateShow=!0},t.e2=function(n){t.plateShow=!0},t.e3=function(n){t.plateShow=!1})},o=[]},"1fa7":function(t,n,e){"use strict";var i=e("f9ca"),o=e.n(i);o.a},"530e":function(t,n,e){"use strict";(function(t,n){var i=e("4ea4");e("c530");i(e("66fd"));var o=i(e("80d6"));t.__webpack_require_UNI_MP_PLUGIN__=e,n(o.default)}).call(this,e("bc2e")["default"],e("543d")["createPage"])},"80d6":function(t,n,e){"use strict";e.r(n);var i=e("08e4"),o=e("b281");for(var u in o)["default"].indexOf(u)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(u);e("1fa7");var a=e("f0c5"),r=Object(a["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);n["default"]=r.exports},b281:function(t,n,e){"use strict";e.r(n);var i=e("0316"),o=e.n(i);for(var u in i)["default"].indexOf(u)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(u);n["default"]=o.a},f9ca:function(t,n,e){}},[["530e","common/runtime","common/vendor"]]]);