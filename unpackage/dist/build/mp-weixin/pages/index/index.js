(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{1041:function(n,t,e){"use strict";e.r(t);var i=e("670f"),o=e.n(i);for(var a in i)["default"].indexOf(a)<0&&function(n){e.d(t,n,(function(){return i[n]}))}(a);t["default"]=o.a},"62dc":function(n,t,e){"use strict";var i=e("e926"),o=e.n(i);o.a},"670f":function(n,t,e){"use strict";(function(n){var i=e("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(e("2eee")),a=i(e("c973")),r=e("6d37"),c=e("8981"),s=null,u=e("3d6f"),l=new u({key:c.qqmapKey}),f={components:{inside:function(){e.e("components/ParkAndCharingList/inside").then(function(){return resolve(e("dd66"))}.bind(null,e)).catch(e.oe)},external:function(){e.e("components/ParkAndCharingList/external").then(function(){return resolve(e("59a0"))}.bind(null,e)).catch(e.oe)},charge:function(){e.e("components/ParkAndCharingList/charge").then(function(){return resolve(e("5c25"))}.bind(null,e)).catch(e.oe)},weather:function(){e.e("pages/index/components/weather").then(function(){return resolve(e("2fb5"))}.bind(null,e)).catch(e.oe)},wxmpLogin:function(){Promise.all([e.e("common/vendor"),e.e("components/wxmpLogin/wxmpLogin")]).then(function(){return resolve(e("a8b2"))}.bind(null,e)).catch(e.oe)},alimpLogin:function(){Promise.all([e.e("common/vendor"),e.e("components/alimpLogin/alimpLogin")]).then(function(){return resolve(e("fafa"))}.bind(null,e)).catch(e.oe)},bindPhonePopup:function(){e.e("components/bindPhonePopup/index").then(function(){return resolve(e("f257"))}.bind(null,e)).catch(e.oe)}},data:function(){return{isLogin:!1,phoneShow:!1,navIndex:0,chargeIndex:0,locationInfo:{longitude:"",latitude:""},show:!1,externalParking:[],externalChargingStation:[],insideParking:[],insideChargingStation:[],parkMarkers:[],chargingMarkers:[],weatherInfo:{tem:"",wea:"",air_pm25:"",air_level:""},cfChargeBikeList:[]}},onShow:function(){n.getStorageSync("token")?this.isLogin=!0:this.isLogin=!1},onLoad:function(){this.getLocation(),this.adLoad()},methods:{adLoad:function(){n.createInterstitialAd&&(s=n.createInterstitialAd({adUnitId:"adunit-940a0c9ec83f48e8"}),s.onLoad((function(){})),s.onError((function(n){})),s.onClose((function(){}))),s&&s.show().catch((function(n){console.error(n)}))},intoOpenMonthlyCard:function(){var t=n.getStorageSync("user");t.phone?n.navigateTo({url:"/pages/monthlyCard/index"}):this.$refs.bindPhonePopupRef.showPopup()},changeLoginStatus:function(n){this.isLogin=!!n},clearData:function(){this.externalParking=[],this.externalChargingStation=[],this.insideParking=[],this.insideChargingStation=[],this.cfChargeBikeList=[],this.parkMarkers=[],this.chargingMarkers=[]},changeChargeIndex:function(n){this.clearData(),this.chargeIndex=n,0==n&&this.getCfChargeList(),1===n&&this.getCfChargeBikeList()},intoPay:function(){n.navigateTo({url:"/pages/pay/pay"})},change:function(n){console.log(n),this.show=n.show},intoParkingLotDetail:function(){n.navigateTo({url:"/pages/parkingLotDetail/parkingLotDetail"})},changeNavIndex:function(n){this.clearData(),this.navIndex=n,0==n&&this.getCfParkLotList(),1==n&&(0==this.chargeIndex?this.getCfChargeList():this.getCfChargeBikeList())},onZoomInMap:function(){if(0==this.navIndex)n.navigateTo({url:"/pages/mapView/index"});else{var t=0==this.chargeIndex?2:1;n.navigateTo({url:"/pages/mapView/chargeMap?stationType="+t})}},getCfParkLotList:function(){var n=this;return(0,a.default)(o.default.mark((function t(){var e,i,a;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.cfCarParkGet)({positionX:n.locationInfo.longitude,positionY:n.locationInfo.latitude,distance:1e3,page:1,size:100});case 2:e=t.sent,i=e.data,a=e.code,console.log(i,a),10002==a?(n.insideParking=i,n.refreshMarkers(i,"cf","park")):n.getOtherParkLot();case 7:case"end":return t.stop()}}),t)})))()},getCfChargeBikeList:function(){var n=this;return(0,a.default)(o.default.mark((function t(){var e,i,a;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.cfChargingStationGet)({positionX:n.locationInfo.longitude,positionY:n.locationInfo.latitude,distance:1e3,page:1,size:100,stationType:1});case 2:e=t.sent,i=e.data,a=e.code,console.log(i,a),10002==a&&(n.cfChargeBikeList=i,n.refreshMarkers(i,"cf","charging"));case 7:case"end":return t.stop()}}),t)})))()},getCfChargeList:function(){var n=this;return(0,a.default)(o.default.mark((function t(){var e,i,a;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.cfChargingStationGet)({positionX:n.locationInfo.longitude,positionY:n.locationInfo.latitude,distance:1e3,page:1,size:100,stationType:2});case 2:e=t.sent,i=e.data,a=e.code,console.log(i,a),10002==a?(n.insideChargingStation=i,n.refreshMarkers(i,"cf","charging")):n.getOtherChargingStation();case 7:case"end":return t.stop()}}),t)})))()},getLocation:function(){var t=this;n.getLocation({type:"wgs84",success:function(n){console.log("当前位置的经度："+n.longitude),console.log("当前位置的纬度："+n.latitude),t.locationInfo.longitude=n.longitude,t.locationInfo.latitude=n.latitude,t.getCfParkLotList()}})},getOtherChargingStation:function(){var n=this;l.search({keyword:"充电站",location:"".concat(this.locationInfo.latitude,",").concat(this.locationInfo.longitude),success:function(t){0===t.status&&(n.externalChargingStation=t.data,n.refreshMarkers(t.data,"tx","charging"))},fail:function(n){console.log(n)}})},getOtherParkLot:function(){var n=this;l.search({keyword:"停车场",location:"".concat(this.locationInfo.latitude,",").concat(this.locationInfo.longitude),success:function(t){0===t.status&&(n.externalParking=t.data,n.refreshMarkers(t.data,"tx","park"))},fail:function(n){console.log(n)}})},refreshMarkers:function(n,t,e){var i=[],o="park"===e?"http://file.cfeng.wang/parking_icon.png":"http://file.cfeng.wang/charge.png";"cf"===t?(n.forEach((function(n,t){i.push({id:t,latitude:n.positionY,longitude:n.positionX,title:n.name,iconPath:o,width:"32",height:"32",callout:{content:n.name,color:"#FFFFFF",fontSize:12,bgColor:"#301819",padding:10,borderRadius:20}})})),"park"===e?this.parkMarkers=i:this.chargingMarkers=i):"tx"===t&&(n.forEach((function(n,t){i.push({id:t,latitude:n.location.lat,longitude:n.location.lng,title:n.title,iconPath:o,width:"32",height:"32",callout:{content:n.title,color:"#FFFFFF",fontSize:12,bgColor:"#301819",padding:10,borderRadius:20}})})),"park"==e?this.parkMarkers=i:this.chargingMarkers=i)}}};t.default=f}).call(this,e("543d")["default"])},"6c64":function(n,t,e){"use strict";(function(n,t){var i=e("4ea4");e("c530");i(e("66fd"));var o=i(e("edb6"));n.__webpack_require_UNI_MP_PLUGIN__=e,t(o.default)}).call(this,e("bc2e")["default"],e("543d")["createPage"])},9162:function(n,t,e){"use strict";e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){return i}));var i={uniPopup:function(){return e.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(e.bind(null,"1081"))},wxmpLogin:function(){return Promise.all([e.e("common/vendor"),e.e("components/wxmpLogin/wxmpLogin")]).then(e.bind(null,"a8b2"))}},o=function(){var n=this.$createElement;this._self._c},a=[]},e926:function(n,t,e){},edb6:function(n,t,e){"use strict";e.r(t);var i=e("9162"),o=e("1041");for(var a in o)["default"].indexOf(a)<0&&function(n){e.d(t,n,(function(){return o[n]}))}(a);e("62dc");var r=e("f0c5"),c=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=c.exports}},[["6c64","common/runtime","common/vendor"]]]);